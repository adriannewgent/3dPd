#N canvas 577 118 765 840 10;
#X obj 27 40 inlet;
#X obj 27 62 route devices float close symbol;
#X msg 27 130 devices;
#X msg 82 108 open \$1;
#X msg 137 86 close;
#X msg 192 86 devicename \$1;
#X obj 165 521 repack;
#X obj 165 651 s;
#X msg 292 634 symbol module\$1;
#X obj 165 543 spigot;
#X msg 224 490 0;
#X msg 27 495 1;
#X obj 27 451 select 255;
#X text 102 447 0xff denotes the beginning of the data stream;
#N canvas 686 457 684 370 route_data 0;
#X obj 96 59 inlet;
#X obj 96 81 t b f;
#X obj 96 133 f;
#X obj 126 133 + 1;
#X obj 96 155 pack;
#X obj 162 59 inlet;
#X obj 72 298 outlet;
#X obj 261 298 outlet module_nr;
#X obj 138 298 outlet repack_arg;
#X obj 33 275 unpack;
#X text 21 326 exclude the counter from the rest of the bytes;
#X msg 162 81 0;
#X text 188 141 the first byte is the module number \, the second is
the extra byte to determine whether the receiving module is number
13 (cause the Teensy will print 10 instead of 13) and the third byte
sets the number of bytes [repack] should expect;
#X obj 261 276 bug13;
#X obj 138 276 bug13;
#X obj 96 177 route 2 3 0 1;
#X obj 261 254 f;
#X obj 261 230 t b f;
#X obj 138 254 f;
#X obj 138 230 t b f;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 4 1;
#X connect 2 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 4 0 15 0;
#X connect 5 0 11 0;
#X connect 9 1 6 0;
#X connect 11 0 2 1;
#X connect 13 0 7 0;
#X connect 14 0 8 0;
#X connect 15 0 18 1;
#X connect 15 1 19 0;
#X connect 15 2 16 1;
#X connect 15 3 17 0;
#X connect 15 4 9 0;
#X connect 16 0 13 0;
#X connect 17 0 16 0;
#X connect 17 1 13 1;
#X connect 18 0 14 0;
#X connect 19 0 18 0;
#X connect 19 1 14 1;
#X restore 165 468 pd route_data;
#X obj 165 565 t l b;
#X obj 27 473 t b b b b;
#X text 258 54 anything not matching [route]'s args will be input to
[comport] intact (e.g. a [print \$1m\$2p\$3v( message);
#X obj 165 798 s resolution;
#X obj 190 776 s connections;
#X obj 152 237 route open;
#X msg 152 396 print r;
#X obj 225 729 s shut_down;
#X obj 211 752 s num_io;
#X obj 167 131 loadbang;
#X msg 167 153 info;
#X obj 239 215 spigot 1;
#X obj 167 175 t a b;
#X obj 239 192 del 100;
#X msg 304 198 0;
#X text 204 157 send "info" message repetedly until you retrieve the
"open" state;
#X obj 165 704 route 0 1 2 3;
#X obj 152 259 sel 1;
#X obj 152 282 t b b b;
#X msg 171 304 print i;
#X text 228 297 as soon as the port opens \, query the number of inputs
and outputs;
#X text 208 396 and reset the connections and switches states;
#X obj 253 543 moses 1;
#X obj 253 566 t b;
#X msg 253 588 symbol generic_data;
#X obj 165 682 r generic_data;
#X text 302 541 0 is the generic_data index for data that are diffused
in the [route] below;
#X text 310 685 data that are not routed to module abstractions are
being groupped under the "generic_data" symbol and diffused with an
extra index \, a 0 for the analog pins resolution \, a 1 for the connections
data \, a 2 for the total number of inputs and outputs so that the
matrix can be created \, and a 3 for shutting the system down;
#X obj 152 327 del 50;
#X obj 152 349 t b b;
#X msg 201 366 print a;
#X text 257 366 query the analog pins resolution;
#X obj 152 371 del 50;
#X obj 27 220 comport \$1 57600;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 1 2 4 0;
#X connect 1 3 5 0;
#X connect 1 4 48 0;
#X connect 2 0 48 0;
#X connect 3 0 48 0;
#X connect 4 0 48 0;
#X connect 5 0 48 0;
#X connect 6 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 15 0;
#X connect 10 0 9 1;
#X connect 11 0 9 1;
#X connect 12 0 16 0;
#X connect 12 1 14 0;
#X connect 14 0 6 0;
#X connect 14 1 6 1;
#X connect 14 2 37 0;
#X connect 15 0 7 0;
#X connect 15 1 14 1;
#X connect 16 0 11 0;
#X connect 16 1 6 0;
#X connect 16 2 14 1;
#X connect 16 3 10 0;
#X connect 20 0 32 0;
#X connect 21 0 48 0;
#X connect 24 0 25 0;
#X connect 25 0 27 0;
#X connect 26 0 25 0;
#X connect 27 0 48 0;
#X connect 27 1 28 0;
#X connect 28 0 26 0;
#X connect 29 0 26 1;
#X connect 31 0 18 0;
#X connect 31 1 19 0;
#X connect 31 2 23 0;
#X connect 31 3 22 0;
#X connect 32 0 33 0;
#X connect 33 0 43 0;
#X connect 33 1 34 0;
#X connect 33 2 29 0;
#X connect 34 0 48 0;
#X connect 37 0 38 0;
#X connect 37 1 8 0;
#X connect 38 0 39 0;
#X connect 39 0 7 1;
#X connect 40 0 31 0;
#X connect 43 0 44 0;
#X connect 44 0 47 0;
#X connect 44 1 45 0;
#X connect 45 0 48 0;
#X connect 47 0 21 0;
#X connect 48 0 12 0;
#X connect 48 1 20 0;
